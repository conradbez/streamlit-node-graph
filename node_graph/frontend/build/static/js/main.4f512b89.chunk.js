(this["webpackJsonpstreamlit-node-graph"]=this["webpackJsonpstreamlit-node-graph"]||[]).push([[0],{228:function(t,e,n){t.exports=n(463)},462:function(t,e,n){},463:function(t,e,n){"use strict";n.r(e);var r,a,o=n(5),i=n.n(o),c=n(225),l=n.n(c),s=n(0),d=n(3),u=n(32),p=n(1),g=n(2),m=n(24),h=n(18);(a||(a={})).Tray=h.default.div(r||(r=Object(m.a)(["\n\t\tmin-width: 200px;\n\t\tbackground: rgb(20, 20, 20);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t\tpadding: 10px;\n\t"])));var y,b,v=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return o.createElement(a.Tray,null,this.props.children)}}]),n}(o.Component);!function(t){t.Tray=h.default.div(y||(y=Object(m.a)(["\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial;\n\t\tpadding: 5px;\n\t\tmargin: 0px 10px;\n\t\tborder: solid 1px ",";\n\t\tborder-radius: 5px;\n\t\tmargin-top: 4px;\n\t\tcursor: pointer;\n\t"])),(function(t){return t.color}))}(b||(b={}));var f,O,j,E=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var t=this;return o.createElement(b.Tray,{color:this.props.color,draggable:!0,onDragStart:function(e){e.dataTransfer.setData("storm-diagram-node",JSON.stringify(t.props.model))},className:"tray-item"},this.props.name)}}]),n}(o.Component),k=n(45),w=n.n(k),x=n(13),C=n(62);!function(t){t.Container=h.default.div(f||(f=Object(m.a)(["\n\t\theight: 100%;\n\t\tbackground-color: ",";\n\t\tbackground-size: 50px 50px;\n\t\tdisplay: flex;\n\n\t\t> * {\n\t\t\theight: 100%;\n\t\t\tmin-height: 100%;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\tbackground-image: linear-gradient(\n\t\t\t\t0deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t90deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t);\n\t"])),(function(t){return t.background}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color})),t.Expand=Object(C.css)(O||(O=Object(m.a)(["\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\theight: 100%;\n\t\t}\n\t"])))}(j||(j={}));var N,S,P,M,F,D,T=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return console.log("rendering node-graph"),o.createElement(o.Fragment,null,o.createElement(C.Global,{styles:j.Expand}),o.createElement(j.Container,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)"},this.props.children))}}]),n}(o.Component),I=n(12),z=n(11),L=n(10),J=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(s.a)(this,n),(t=e.call(this,Object(I.a)({},r))).color=void 0,t.type=void 0,t.color=r.color||"red",t.type=r.type,console.log("here"),console.log(t.options.type),["Sales","Conversion","Inventory"].includes(t.options.type)&&t.addPort(new k.DefaultPortModel({in:!0,name:"in"})),["Purchase","Conversion","Inventory"].includes(t.options.type)&&t.addPort(new k.DefaultPortModel({in:!1,name:"out"})),t}return Object(d.a)(n,[{key:"serialize",value:function(){return Object(I.a)(Object(I.a)({},Object(z.a)(Object(L.a)(n.prototype),"serialize",this).call(this)),{},{color:this.color,type:this.type})}},{key:"deserialize",value:function(t){Object(z.a)(Object(L.a)(n.prototype),"deserialize",this).call(this,t),this.color=t.data.color,this.type=t.type}}]),n}(k.NodeModel),W=n(23),B=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(t){var r;return Object(s.a)(this,n),(r=e.call(this,t)).state={},r}return Object(d.a)(n,[{key:"render",value:function(){return o.createElement("div",{className:"custom-node"},["Sales","Conversion","Inventory"].includes(this.props.node.type)?o.createElement(W.PortWidget,{engine:this.props.engine,port:this.props.node.getPort("in")},o.createElement("div",{className:"circle-port"})):o.createElement("div",{className:"circle-port",style:{visibility:"hidden"}}),["Purchase","Conversion","Inventory"].includes(this.props.node.type)?o.createElement(W.PortWidget,{engine:this.props.engine,port:this.props.node.getPort("out")},o.createElement("div",{className:"circle-port"})):o.createElement("div",{className:"circle-port",style:{visibility:"hidden"}}),o.createElement("div",{className:"custom-node-color",style:{backgroundColor:this.props.node.color}}))}}]),n}(o.Component),R=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(t){return Object(s.a)(this,n),e.call(this,t.type)}return Object(d.a)(n,[{key:"generateModel",value:function(t){return new J}},{key:"generateReactWidget",value:function(t){return o.createElement(B,{engine:this.engine,node:t.model})}}]),n}(x.AbstractReactFactory),U=n(63),A=Object(h.default)(T)(N||(N=Object(m.a)(["\n  height: 100%;\n  width: 100%;\n"]))),H=h.default.div(S||(S=Object(m.a)(["\n  height: 800px;\n  width: 100vw;\n"])));!function(t){t.Body=h.default.div(P||(P=Object(m.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100%;\n\t"]))),t.Content=h.default.div(M||(M=Object(m.a)(["\n\t\theight: 100px;\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t"]))),t.Layer=h.default.div(F||(F=Object(m.a)(["\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t"])))}(D||(D={}));var G=function(t){Object(p.a)(n,t);var e=Object(g.a)(n);function n(t){var r;Object(s.a)(this,n),(r=e.call(this,t)).state={diagramEngine:w()(),lastNodeSelected:null},r.state.diagramEngine.getNodeFactories().registerFactory(new R({type:"Purchase"})),r.state.diagramEngine.getNodeFactories().registerFactory(new R({type:"Inventory"})),r.state.diagramEngine.getNodeFactories().registerFactory(new R({type:"Sales"})),r.state.diagramEngine.getNodeFactories().registerFactory(new R({type:"Conversion"}));var a=new k.DiagramModel;return a.registerListener({nodesUpdated:r.sendToStreamlit.bind(Object(u.a)(r)),linksUpdated:r.sendToStreamlit.bind(Object(u.a)(r))}),r.state.diagramEngine.setModel(a),r.state.diagramEngine.getModel(),r}return Object(d.a)(n,[{key:"componentDidMount",value:function(){U.a.setFrameHeight()}},{key:"selectionChangedListner",value:function(t){this.setState({lastNodeSelected:t.entity.options.id},this.sendToStreamlit)}},{key:"sendToStreamlit",value:function(){var t=this.state.diagramEngine.getModel(),e=JSON.stringify({model:t.serialize(),lastNodeSelected:this.state.lastNodeSelected});console.log("getting ready to send to streamlit"),U.a.setComponentValue(e)}},{key:"render",value:function(){var t=this;return o.createElement(D.Body,null,o.createElement(D.Content,null,o.createElement(v,null,o.createElement(E,{model:{type:"Purchase"},name:"Purchase",color:"rgb(192,0,255)"}),o.createElement(E,{model:{type:"Inventory"},name:"Inventory",color:"rgb(192,255,0)"}),o.createElement(E,{model:{type:"Conversion"},name:"Conversion",color:"rgb(0,192,255)"}),o.createElement(E,{model:{type:"Sales"},name:"Sales",color:"rgb(255,192,0)"})),o.createElement(D.Layer,{onDrop:function(e){var n,r=JSON.parse(e.dataTransfer.getData("storm-diagram-node"));"Purchase"===r.type&&(n=new J({color:"rgb(192,0,255)",type:r.type})),"Inventory"===r.type&&(n=new J({color:"rgb(192,255, 0)",type:r.type})),"Conversion"===r.type&&(n=new J({color:"rgb(0,192,255)",type:r.type})),"Sales"===r.type&&(n=new J({color:"rgb(255,192,0)",type:r.type}));var a=t.state.diagramEngine.getRelativeMousePoint(e);n.setPosition(a),n.registerListener({selectionChanged:t.selectionChangedListner.bind(t)}),t.state.diagramEngine.getModel().addNode(n),t.forceUpdate()},onDragOver:function(t){t.preventDefault()}},o.createElement(H,null,o.createElement(A,null,o.createElement(x.CanvasWidget,{engine:this.state.diagramEngine}))))))}}]),n}(U.b),V=Object(U.c)(G);n(462);l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(V,null)),document.getElementById("root"))}},[[228,1,2]]]);
//# sourceMappingURL=main.4f512b89.chunk.js.map