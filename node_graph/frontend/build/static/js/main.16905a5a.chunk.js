(this["webpackJsonpstreamlit-node-graph"]=this["webpackJsonpstreamlit-node-graph"]||[]).push([[0],{233:function(t,e,n){t.exports=n(470)},469:function(t,e,n){},470:function(t,e,n){"use strict";n.r(e);var r,o,a=n(5),i=n.n(a),c=n(229),l=n.n(c),s=n(13),d=n(0),p=n(3),u=n(31),h=n(1),m=n(2),g=n(25),f=n(19);(o||(o={})).Tray=f.default.div(r||(r=Object(g.a)(["\n\t\tmin-width: 200px;\n\t\tbackground: rgb(20, 20, 20);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t\tpadding: 10px;\n\t"])));var b,v,y=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return a.createElement(o.Tray,null,this.props.children)}}]),n}(a.Component);!function(t){t.Tray=f.default.div(b||(b=Object(g.a)(["\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial;\n\t\tpadding: 5px;\n\t\tmargin: 0px 10px;\n\t\tborder: solid 1px ",";\n\t\tborder-radius: 5px;\n\t\tmargin-top: 4px;\n\t\tcursor: pointer;\n\t"])),(function(t){return t.color}))}(v||(v={}));var O,j,E,x=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return a.createElement(v.Tray,{color:this.props.color,draggable:!0,onDragStart:function(e){e.dataTransfer.setData("storm-diagram-node",JSON.stringify(t.props.model))},className:"tray-item"},this.props.name)}}]),n}(a.Component),k=n(46),N=n.n(k),w=n(15),_=n(65);!function(t){t.Container=f.default.div(O||(O=Object(g.a)(["\n\t\theight: 100%;\n\t\tbackground-color: ",";\n\t\tbackground-size: 50px 50px;\n\t\tdisplay: flex;\n\n\t\t> * {\n\t\t\theight: 100%;\n\t\t\tmin-height: 100%;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\tbackground-image: linear-gradient(\n\t\t\t\t0deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t90deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t);\n\t"])),(function(t){return t.background}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color})),t.Expand=Object(_.css)(j||(j=Object(g.a)(["\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\theight: 100%;\n\t\t}\n\t"])))}(E||(E={}));var C,S,M,D,P,T,L=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return a.createElement(a.Fragment,null,a.createElement(_.Global,{styles:E.Expand}),a.createElement(E.Container,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)"},this.props.children))}}]),n}(a.Component),z=n(12),J=n(11),F=n(10),I=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(this,n),(t=e.call(this,Object(z.a)({},r))).color=void 0,t.type=void 0,t.port_selection=void 0,t.name=void 0,t.icon=void 0,t.color=r.color||"red",t.type=r.type,t.port_selection=r.port_selection,t.name=r.name||r.type,t.icon=r.icon||"circle",t.setupInOutPorts(),t}return Object(p.a)(n,[{key:"setupInOutPorts",value:function(){"in"!=this.port_selection&&"both"!=this.port_selection||this.addPort(new k.DefaultPortModel({in:!0,name:"in"})),"out"!=this.port_selection&&"both"!=this.port_selection||this.addPort(new k.DefaultPortModel({in:!1,name:"out"}))}},{key:"serialize",value:function(){return Object(z.a)(Object(z.a)({},Object(J.a)(Object(F.a)(n.prototype),"serialize",this).call(this)),{},{color:this.color,type:this.type,port_selection:this.port_selection,name:this.name})}},{key:"deserialize",value:function(t){Object(J.a)(Object(F.a)(n.prototype),"deserialize",this).call(this,t),this.color=t.data.color,this.options.type=t.data.type,this.type=t.data.type,this.port_selection=t.data.port_selection,this.name=t.data.name}}]),n}(k.DefaultNodeModel),U=n(24),W=n(232),B=(n(467),n(468),function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(t){var r;return Object(d.a)(this,n),(r=e.call(this,t)).insideNodeGraphic=function(){return"circle"!==r.props.node.icon?a.createElement("div",{className:"custom-node-color"},a.createElement("i",{className:r.props.node.icon})):a.createElement("div",{className:"custom-node-color",style:{backgroundColor:r.props.node.color}})},r.state={},r}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"white"}},a.createElement("div",{className:"custom-node"},"in"==this.props.node.port_selection||"both"==this.props.node.port_selection?a.createElement(U.PortWidget,{engine:this.props.engine,port:this.props.node.getPort("in")},a.createElement("div",{className:"circle-port"})):a.createElement("div",{className:"circle-port",style:{visibility:"hidden"}}),"out"==this.props.node.port_selection||"both"==this.props.node.port_selection?a.createElement(U.PortWidget,{engine:this.props.engine,port:this.props.node.getPort("out")},a.createElement("div",{className:"circle-port"})):a.createElement("div",{className:"circle-port",style:{visibility:"hidden"}}),this.insideNodeGraphic()),a.createElement("div",null,a.createElement(W.a,{placeholder:this.props.node.name,onSave:function(e){t.props.node.name=e.value,console.log(t.props.engine.getModel()),t.props.engine.getModel().fireEvent({node:t.props.node,nameChanged:!0},"nodesUpdated")}})))}}]),n}(a.Component)),G=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(t){return Object(d.a)(this,n),e.call(this,t.type)}return Object(p.a)(n,[{key:"generateModel",value:function(){return new I}},{key:"generateReactWidget",value:function(t){return a.createElement(B,{engine:this.engine,node:t.model})}}]),n}(w.AbstractReactFactory),R=n(14),A=n(67),H=Object(f.default)(L)(C||(C=Object(g.a)(["\n  height: 100%;\n  width: 100%;\n"]))),V=f.default.div(S||(S=Object(g.a)(["\n  height: 800px;\n  width: 100vw;\n"])));!function(t){t.Body=f.default.div(M||(M=Object(g.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100%;\n\t"]))),t.Content=f.default.div(D||(D=Object(g.a)(["\n\t\theight: 100px;\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t"]))),t.Layer=f.default.div(P||(P=Object(g.a)(["\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t"])))}(T||(T={}));var q=function(t){Object(h.a)(n,t);var e=Object(m.a)(n);function n(t){var r;Object(d.a)(this,n),(r=e.call(this,t)).state={diagramEngine:N()(),lastNodeSelected:null};var o,a=r.props.args.item_types,i=Object(s.a)(a);try{for(i.s();!(o=i.n()).done;){var c=o.value.title;r.state.diagramEngine.getNodeFactories().registerFactory(new G({type:c}))}}catch(p){i.e(p)}finally{i.f()}var l=new k.DiagramModel;return t.args.model&&l.deserializeModel(JSON.parse(t.args.model),r.state.diagramEngine),l.registerListener({nodesUpdated:r.sendToStreamlit.bind(Object(u.a)(r)),linksUpdated:r.sendToStreamlit.bind(Object(u.a)(r))}),R.forEach(l.getNodes(),(function(t){t.registerListener({selectionChanged:r.selectionChangedListner.bind(Object(u.a)(r))})})),r.state.diagramEngine.setModel(l),r}return Object(p.a)(n,[{key:"componentDidMount",value:function(){A.a.setFrameHeight()}},{key:"selectionChangedListner",value:function(t){this.setState({lastNodeSelected:t.entity.options.id},this.sendToStreamlit)}},{key:"sendToStreamlit",value:function(){var t=this.state.diagramEngine.getModel(),e=JSON.stringify({model:t.serialize(),lastNodeSelected:this.state.lastNodeSelected});A.a.setComponentValue(e)}},{key:"render",value:function(){var t=this,e=this.props.args.item_types,n=e.map((function(t){return a.createElement(x,{model:{type:t.title},name:t.title,color:t.color})}));return a.createElement(T.Body,null,a.createElement(T.Content,null,a.createElement(y,null,n),a.createElement(T.Layer,{onDrop:function(n){var r=JSON.parse(n.dataTransfer.getData("storm-diagram-node")),o=e.filter((function(t){return t.title==r.type}))[0].color,a=e.filter((function(t){return t.title==r.type}))[0].icon,i=e.filter((function(t){return t.title==r.type}))[0].port_selection,c=new I({color:o,type:r.type,port_selection:i,icon:a}),l=t.state.diagramEngine.getRelativeMousePoint(n);c.setPosition(l),c.registerListener({selectionChanged:t.selectionChangedListner.bind(t)}),t.state.diagramEngine.getModel().addNode(c),t.forceUpdate()},onDragOver:function(t){t.preventDefault()}},a.createElement(V,null,a.createElement(H,null,a.createElement(w.CanvasWidget,{engine:this.state.diagramEngine}))))))}}]),n}(A.b),K=Object(A.c)(q);n(469);l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(K,null)),document.getElementById("root"))}},[[233,1,2]]]);
//# sourceMappingURL=main.16905a5a.chunk.js.map