(this["webpackJsonpstreamlit-node-graph"]=this["webpackJsonpstreamlit-node-graph"]||[]).push([[0],{231:function(t,e,n){t.exports=n(466)},465:function(t,e,n){},466:function(t,e,n){"use strict";n.r(e);var r,o,a=n(5),i=n.n(a),c=n(228),l=n.n(c),s=n(13),d=n(0),u=n(3),p=n(31),h=n(1),g=n(2),m=n(25),f=n(19);(o||(o={})).Tray=f.default.div(r||(r=Object(m.a)(["\n\t\tmin-width: 200px;\n\t\tbackground: rgb(20, 20, 20);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t\tpadding: 10px;\n\t"])));var b,y,v=function(t){Object(h.a)(n,t);var e=Object(g.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return a.createElement(o.Tray,null,this.props.children)}}]),n}(a.Component);!function(t){t.Tray=f.default.div(b||(b=Object(m.a)(["\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial;\n\t\tpadding: 5px;\n\t\tmargin: 0px 10px;\n\t\tborder: solid 1px ",";\n\t\tborder-radius: 5px;\n\t\tmargin-top: 4px;\n\t\tcursor: pointer;\n\t"])),(function(t){return t.color}))}(y||(y={}));var O,j,E,k=function(t){Object(h.a)(n,t);var e=Object(g.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=this;return a.createElement(y.Tray,{color:this.props.color,draggable:!0,onDragStart:function(e){e.dataTransfer.setData("storm-diagram-node",JSON.stringify(t.props.model))},className:"tray-item"},this.props.name)}}]),n}(a.Component),x=n(46),_=n.n(x),N=n(15),w=n(64);!function(t){t.Container=f.default.div(O||(O=Object(m.a)(["\n\t\theight: 100%;\n\t\tbackground-color: ",";\n\t\tbackground-size: 50px 50px;\n\t\tdisplay: flex;\n\n\t\t> * {\n\t\t\theight: 100%;\n\t\t\tmin-height: 100%;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\tbackground-image: linear-gradient(\n\t\t\t\t0deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t90deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t);\n\t"])),(function(t){return t.background}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color})),t.Expand=Object(w.css)(j||(j=Object(m.a)(["\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\theight: 100%;\n\t\t}\n\t"])))}(E||(E={}));var C,S,M,P,D,T,L=function(t){Object(h.a)(n,t);var e=Object(g.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return a.createElement(a.Fragment,null,a.createElement(w.Global,{styles:E.Expand}),a.createElement(E.Container,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)"},this.props.children))}}]),n}(a.Component),z=n(12),J=n(11),F=n(10),W=function(t){Object(h.a)(n,t);var e=Object(g.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(this,n),(t=e.call(this,Object(z.a)({},r))).color=void 0,t.type=void 0,t.port_selection=void 0,t.color=r.color||"red",t.type=r.type,t.port_selection=r.port_selection,t.setupInOutPorts(),t}return Object(u.a)(n,[{key:"setupInOutPorts",value:function(){console.log("hererers"),console.log(this.port_selection),"in"!=this.port_selection&&"both"!=this.port_selection||this.addPort(new x.DefaultPortModel({in:!0,name:"in"})),"out"!=this.port_selection&&"both"!=this.port_selection||this.addPort(new x.DefaultPortModel({in:!1,name:"out"}))}},{key:"serialize",value:function(){return Object(z.a)(Object(z.a)({},Object(J.a)(Object(F.a)(n.prototype),"serialize",this).call(this)),{},{color:this.color,type:this.type,port_selection:this.port_selection})}},{key:"deserialize",value:function(t){Object(J.a)(Object(F.a)(n.prototype),"deserialize",this).call(this,t),this.color=t.data.color,this.options.type=t.data.type,this.type=t.data.type,this.port_selection=t.data.port_selection}}]),n}(x.DefaultNodeModel),B=n(24),I=function(t){Object(h.a)(n,t);var e=Object(g.a)(n);function n(t){var r;return Object(d.a)(this,n),(r=e.call(this,t)).state={},r}return Object(u.a)(n,[{key:"render",value:function(){return a.createElement("div",{className:"custom-node"},"in"==this.props.node.port_selection||"both"==this.props.node.port_selection?a.createElement(B.PortWidget,{engine:this.props.engine,port:this.props.node.getPort("in")},a.createElement("div",{className:"circle-port"})):a.createElement("div",{className:"circle-port",style:{visibility:"hidden"}}),"out"==this.props.node.port_selection||"both"==this.props.node.port_selection?a.createElement(B.PortWidget,{engine:this.props.engine,port:this.props.node.getPort("out")},a.createElement("div",{className:"circle-port"})):a.createElement("div",{className:"circle-port",style:{visibility:"hidden"}}),a.createElement("div",{className:"custom-node-color",style:{backgroundColor:this.props.node.color}}))}}]),n}(a.Component),R=function(t){Object(h.a)(n,t);var e=Object(g.a)(n);function n(t){return Object(d.a)(this,n),e.call(this,t.type)}return Object(u.a)(n,[{key:"generateModel",value:function(){return new W}},{key:"generateReactWidget",value:function(t){return a.createElement(I,{engine:this.engine,node:t.model})}}]),n}(N.AbstractReactFactory),U=n(14),A=n(66),H=Object(f.default)(L)(C||(C=Object(m.a)(["\n  height: 100%;\n  width: 100%;\n"]))),G=f.default.div(S||(S=Object(m.a)(["\n  height: 800px;\n  width: 100vw;\n"])));!function(t){t.Body=f.default.div(M||(M=Object(m.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100%;\n\t"]))),t.Content=f.default.div(P||(P=Object(m.a)(["\n\t\theight: 100px;\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t"]))),t.Layer=f.default.div(D||(D=Object(m.a)(["\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t"])))}(T||(T={}));var V=function(t){Object(h.a)(n,t);var e=Object(g.a)(n);function n(t){var r;Object(d.a)(this,n),(r=e.call(this,t)).state={diagramEngine:_()(),lastNodeSelected:null};var o=r.props.args.item_types;console.log(o);var a,i=Object(s.a)(o);try{for(i.s();!(a=i.n()).done;){var c=a.value.title;r.state.diagramEngine.getNodeFactories().registerFactory(new R({type:c}))}}catch(u){i.e(u)}finally{i.f()}var l=new x.DiagramModel;return t.args.model&&l.deserializeModel(JSON.parse(t.args.model),r.state.diagramEngine),l.registerListener({nodesUpdated:r.sendToStreamlit.bind(Object(p.a)(r)),linksUpdated:r.sendToStreamlit.bind(Object(p.a)(r))}),U.forEach(l.getNodes(),(function(t){t.registerListener({selectionChanged:r.selectionChangedListner.bind(Object(p.a)(r))})})),r.state.diagramEngine.setModel(l),r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){A.a.setFrameHeight()}},{key:"selectionChangedListner",value:function(t){this.setState({lastNodeSelected:t.entity.options.id},this.sendToStreamlit)}},{key:"sendToStreamlit",value:function(){var t=this.state.diagramEngine.getModel(),e=JSON.stringify({model:t.serialize(),lastNodeSelected:this.state.lastNodeSelected});A.a.setComponentValue(e)}},{key:"render",value:function(){var t=this,e=this.props.args.item_types,n=e.map((function(t){return a.createElement(k,{model:{type:t.title},name:t.title,color:t.color})}));return a.createElement(T.Body,null,a.createElement(T.Content,null,a.createElement(v,null,n),a.createElement(T.Layer,{onDrop:function(n){var r=JSON.parse(n.dataTransfer.getData("storm-diagram-node")),o=e.filter((function(t){return t.title==r.type}))[0].color,a=e.filter((function(t){return t.title==r.type}))[0].port_selection,i=new W({color:o,type:r.type,port_selection:a}),c=t.state.diagramEngine.getRelativeMousePoint(n);i.setPosition(c),i.registerListener({selectionChanged:t.selectionChangedListner.bind(t)}),t.state.diagramEngine.getModel().addNode(i),t.forceUpdate()},onDragOver:function(t){t.preventDefault()}},a.createElement(G,null,a.createElement(H,null,a.createElement(N.CanvasWidget,{engine:this.state.diagramEngine}))))))}}]),n}(A.b),q=Object(A.c)(V);n(465);l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(q,null)),document.getElementById("root"))}},[[231,1,2]]]);
//# sourceMappingURL=main.9a011079.chunk.js.map