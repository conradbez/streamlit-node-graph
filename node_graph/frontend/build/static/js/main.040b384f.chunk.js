(this["webpackJsonpstreamlit-node-graph"]=this["webpackJsonpstreamlit-node-graph"]||[]).push([[0],{237:function(t,e,n){t.exports=n(478)},477:function(t,e,n){},478:function(t,e,n){"use strict";n.r(e);var r,o,a=n(5),i=n.n(a),c=n(231),l=n.n(c),s=n(13),d=n(0),p=n(3),u=n(32),g=n(1),h=n(2),m=n(26),f=n(20);(o||(o={})).Tray=f.default.div(r||(r=Object(m.a)(["\n\t\tmin-width: 200px;\n\t\tbackground: rgb(20, 20, 20);\n\t\tflex-grow: 0;\n\t\tflex-shrink: 0;\n\t\tpadding: 10px;\n\t"])));var b,v,y=function(t){Object(g.a)(n,t);var e=Object(h.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return a.createElement(o.Tray,null,this.props.children)}}]),n}(a.Component);!function(t){t.Tray=f.default.div(b||(b=Object(m.a)(["\n\t\tcolor: white;\n\t\tfont-family: Helvetica, Arial;\n\t\tpadding: 5px;\n\t\tmargin: 0px 10px;\n\t\tborder: solid 1px ",";\n\t\tborder-radius: 5px;\n\t\tmargin-top: 4px;\n\t\tcursor: pointer;\n\t"])),(function(t){return t.color}))}(v||(v={}));var O,j,E,x=function(t){Object(g.a)(n,t);var e=Object(h.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var t=this;return a.createElement(v.Tray,{color:this.props.color,draggable:!0,onDragStart:function(e){e.dataTransfer.setData("storm-diagram-node",JSON.stringify(t.props.model))},className:"tray-item"},this.props.name)}}]),n}(a.Component),k=n(47),N=n.n(k),w=n(15),C=n(68);!function(t){t.Container=f.default.div(O||(O=Object(m.a)(["\n\t\theight: 100%;\n\t\tbackground-color: ",";\n\t\tbackground-size: 50px 50px;\n\t\tdisplay: flex;\n\n\t\t> * {\n\t\t\theight: 100%;\n\t\t\tmin-height: 100%;\n\t\t\twidth: 100%;\n\t\t}\n\n\t\tbackground-image: linear-gradient(\n\t\t\t\t0deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t),\n\t\t\tlinear-gradient(\n\t\t\t\t90deg,\n\t\t\t\ttransparent 24%,\n\t\t\t\t"," 25%,\n\t\t\t\t"," 26%,\n\t\t\t\ttransparent 27%,\n\t\t\t\ttransparent 74%,\n\t\t\t\t"," 75%,\n\t\t\t\t"," 76%,\n\t\t\t\ttransparent 77%,\n\t\t\t\ttransparent\n\t\t\t);\n\t"])),(function(t){return t.background}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color}),(function(t){return t.color})),t.Expand=Object(C.css)(j||(j=Object(m.a)(["\n\t\thtml,\n\t\tbody,\n\t\t#root {\n\t\t\theight: 100%;\n\t\t}\n\t"])))}(E||(E={}));var _=function(t){Object(g.a)(n,t);var e=Object(h.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return a.createElement(a.Fragment,null,a.createElement(C.Global,{styles:E.Expand}),a.createElement(E.Container,{background:this.props.background||"rgb(60, 60, 60)",color:this.props.color||"rgba(255,255,255, 0.05)"},this.props.children))}}]),n}(a.Component),S=n(12),D=n(11),M=n(10),P=function(t){Object(g.a)(n,t);var e=Object(h.a)(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(d.a)(this,n),(t=e.call(this,Object(S.a)({},r))).color=void 0,t.type=void 0,t.port_selection=void 0,t.name=void 0,t.icon=void 0,t.color=r.color||"red",t.type=r.type,t.port_selection=r.port_selection,t.name=r.name||r.type,t.icon=r.icon||"circle",t.setupInOutPorts(),t}return Object(p.a)(n,[{key:"setupInOutPorts",value:function(){"in"!=this.port_selection&&"both"!=this.port_selection||this.addPort(new k.DefaultPortModel({in:!0,name:"in"})),"out"!=this.port_selection&&"both"!=this.port_selection||this.addPort(new k.DefaultPortModel({in:!1,name:"out"}))}},{key:"serialize",value:function(){return Object(S.a)(Object(S.a)({},Object(D.a)(Object(M.a)(n.prototype),"serialize",this).call(this)),{},{color:this.color,type:this.type,port_selection:this.port_selection,name:this.name,icon:this.icon})}},{key:"deserialize",value:function(t){Object(D.a)(Object(M.a)(n.prototype),"deserialize",this).call(this,t),this.color=t.data.color,this.options.type=t.data.type,this.type=t.data.type,this.port_selection=t.data.port_selection,this.name=t.data.name,this.icon=t.data.icon}}]),n}(k.DefaultNodeModel),T=n(25),L=n(234),z=(n(471),n(48)),A=n(236),I=n(235);z.b.add(A.a);var J,B,F,W,U,G,R=function(t){Object(g.a)(n,t);var e=Object(h.a)(n);function n(t){var r;return Object(d.a)(this,n),(r=e.call(this,t)).insideNodeGraphic=function(){return"circle"!==r.props.node.icon?a.createElement(I.a,{icon:r.props.node.icon,fixedWidth:!0,color:r.props.node.color}):a.createElement("div",{className:"custom-node-color",style:{backgroundColor:r.props.node.color}})},r.state={},r}return Object(p.a)(n,[{key:"render",value:function(){var t=this,e="custom-node node-border";return this.props.node.isSelected()&&(e="custom-node node-border-selected"),a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"white"}},a.createElement("div",{className:e},"in"==this.props.node.port_selection||"both"==this.props.node.port_selection?a.createElement(T.PortWidget,{engine:this.props.engine,port:this.props.node.getPort("in")},a.createElement("div",{className:"circle-port"})):a.createElement("div",{className:"circle-port",style:{visibility:"hidden"}}),"out"==this.props.node.port_selection||"both"==this.props.node.port_selection?a.createElement(T.PortWidget,{engine:this.props.engine,port:this.props.node.getPort("out")},a.createElement("div",{className:"circle-port"})):a.createElement("div",{className:"circle-port",style:{visibility:"hidden"}}),a.createElement("div",{className:"custom-node-color"},this.insideNodeGraphic())),a.createElement("div",null,a.createElement(L.a,{onChange:function(t){console.log(t)},placeholder:this.props.node.name,onSave:function(e){t.props.node.name=e.value,console.log(t.props.engine.getModel()),t.props.engine.getModel().fireEvent({node:t.props.node,nameChanged:!0},"nodesUpdated")}})))}}]),n}(a.Component),H=function(t){Object(g.a)(n,t);var e=Object(h.a)(n);function n(t){return Object(d.a)(this,n),e.call(this,t.type)}return Object(p.a)(n,[{key:"generateModel",value:function(){return new P}},{key:"generateReactWidget",value:function(t){return a.createElement(R,{engine:this.engine,node:t.model})}}]),n}(w.AbstractReactFactory),V=n(14),q=n(70),K=Object(f.default)(_)(J||(J=Object(m.a)(["\n  height: 100%;\n  width: 100%;\n"]))),Q=f.default.div(B||(B=Object(m.a)(["\n  height: 800px;\n  width: 100vw;\n"])));!function(t){t.Body=f.default.div(F||(F=Object(m.a)(["\n\t\tflex-grow: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100%;\n\t"]))),t.Content=f.default.div(W||(W=Object(m.a)(["\n\t\theight: 100px;\n\t\tdisplay: flex;\n\t\tflex-grow: 1;\n\t"]))),t.Layer=f.default.div(U||(U=Object(m.a)(["\n\t\tposition: relative;\n\t\tflex-grow: 1;\n\t"])))}(G||(G={}));var X=function(t){Object(g.a)(n,t);var e=Object(h.a)(n);function n(t){var r;Object(d.a)(this,n),(r=e.call(this,t)).state={diagramEngine:N()({registerDefaultDeleteItemsAction:!1}),lastNodeSelected:null};var o,a=r.props.args.item_types,i=Object(s.a)(a);try{for(i.s();!(o=i.n()).done;){var c=o.value.title;r.state.diagramEngine.getNodeFactories().registerFactory(new H({type:c}))}}catch(p){i.e(p)}finally{i.f()}r.state.diagramEngine.getActionEventBus().registerAction(new w.DeleteItemsAction({keyCodes:[46]})),console.log(r.state.diagramEngine.getActionEventBus().regi);var l=new k.DiagramModel;return t.args.model&&l.deserializeModel(JSON.parse(t.args.model),r.state.diagramEngine),l.registerListener({nodesUpdated:r.sendToStreamlit.bind(Object(u.a)(r)),linksUpdated:r.sendToStreamlit.bind(Object(u.a)(r))}),V.forEach(l.getNodes(),(function(t){t.registerListener({selectionChanged:r.selectionChangedListner.bind(Object(u.a)(r))})})),r.state.diagramEngine.setModel(l),r}return Object(p.a)(n,[{key:"componentDidMount",value:function(){q.a.setFrameHeight()}},{key:"selectionChangedListner",value:function(t){this.setState({lastNodeSelected:t.entity.options.id},this.sendToStreamlit)}},{key:"sendToStreamlit",value:function(){var t=this.state.diagramEngine.getModel(),e=JSON.stringify({model:t.serialize(),lastNodeSelected:this.state.lastNodeSelected});q.a.setComponentValue(e)}},{key:"render",value:function(){var t=this,e=this.props.args.item_types,n=e.map((function(t){return a.createElement(x,{model:{type:t.title},name:t.title,color:t.color})}));return a.createElement(G.Body,null,a.createElement(G.Content,null,a.createElement(y,null,n),a.createElement(G.Layer,{onDrop:function(n){var r=JSON.parse(n.dataTransfer.getData("storm-diagram-node")),o=e.filter((function(t){return t.title==r.type}))[0].color,a=e.filter((function(t){return t.title==r.type}))[0].icon,i=e.filter((function(t){return t.title==r.type}))[0].port_selection,c=new P({color:o,type:r.type,port_selection:i,icon:a}),l=t.state.diagramEngine.getRelativeMousePoint(n);c.setPosition(l),c.registerListener({selectionChanged:t.selectionChangedListner.bind(t)}),t.state.diagramEngine.getModel().addNode(c),t.forceUpdate()},onDragOver:function(t){t.preventDefault()}},a.createElement(Q,null,a.createElement(K,null,a.createElement(w.CanvasWidget,{engine:this.state.diagramEngine}))))))}}]),n}(q.b),Y=Object(q.c)(X);n(477);l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Y,null)),document.getElementById("root"))}},[[237,1,2]]]);
//# sourceMappingURL=main.040b384f.chunk.js.map